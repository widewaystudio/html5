var songlist,$=window.Zepto,root=window.player,$scope=$(document.body),index=0;function bindEvent(){$scope.on("click",".pre-v",function(){var o=controlIndex.pre();root.render(songlist[o]),root.audio.getAudio(songlist[o].audio,o),root.audio.renderer(root.audio.status)}),$scope.on("click",".next-btn",function(){var o=controlIndex.next();root.render(songlist[o]),root.audio.getAudio(songlist[o].audio,o),root.audio.renderer(root.audio.status)}),$scope.on("play:change",function(o){root.audio.getAudio(songlist[o._args].audio,o._args),"play"==root.audio.status&&root.audio.play()}),$scope.on("click",".play-btn",function(){"play"==root.audio.status?(root.audio.pause(),root.renderTime.stop()):(root.audio.play(),root.renderTime.start())})}function bindTouch(){var e,o=$scope.find(".dot"),r=$scope.find(".bar")[0],i=$scope.find(".wrap")[0].offsetWidth;o.on("touchstart",function(){root.renderTime.stop()}).on("touchmove",function(o){var t=o.changedTouches[0].clientX,n=.025*i;left=r.offsetLeft,width=$scope.find(".line")[0].offsetWidth,0<=(e=(t-left-n)/width)&&e<.71&&root.renderTime.updata(e)}).on("touchend",function(){root.renderTime.uptime(e),root.renderTime.start()})}function getData(o,t){$.ajax({type:"GET",url:o,success:function(o){t(o[0]),bindEvent(),bindTouch(),songlist=o,controlIndex=new root.controlIndex(o.length),$scope.trigger("play:change",0)},error:function(){}})}root.audio=new root.audioControl,getData("./mock/data.json",root.render);